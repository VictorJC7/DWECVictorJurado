<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>U7 Ejercicio 5</title>
    <script type="text/javascript">

    // crear el objeto xhr
    if (window.XMLHttpRequest) {
      var xhr = new XMLHttpRequest();
    }else if (ActiveXObject("Microsoft.XMLHTTP")) {
      var xhr = ActiveXObject("Microsoft.XMLHTTP");
    }
    // crear la funcion que realiza la peticion
      function solictarDatos() {
        xhr.onreadystatechange = gestionarDatos;
        xhr.open('GET','datos.xml', true);
        xhr.send();
      }
      function gestionarDatos() {
        if (xhr.readyState == 4 && xhr.status == 200) {
          var xmlDoc = xhr.responseXML;
          console.log(xmlDoc);
          var nombres = xmlDoc.getElementsByTagName("nombre");
          console.log(nombres);
        }else if (xhr.readyState == 4 && xhr.status != 200) {
          var str = "Se ha producido el error: " + xhr.status;
          str += "\n " + xhr.statusText;
          str += "\n Mas informacion: ";
          str += "\n " + xhr.getAllResponseHeaders();
          alert(str);
          var xmlDoc = xhr.responseXML;
          console.log(xmlDoc);
          var nombres = xmlDoc.getElementsByTagName("nombre");
          console.log(nombres);
        }
        // console.log("Esto es redyState " + xhr.readyState);
        // console.log("Esto es status " + xhr.status);
      }
    </script>
  </head>
  <body>
    <h1>Hola mundo!</h1>
    <input type="button" value="Solicitar datos" onclick="solictarDatos();"><br>
    <pid id="resultado">Este es el texto que sale al princpio</p>
  </body>
</html>
